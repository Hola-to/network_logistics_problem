# services/gateway-svc/Dockerfile.dev

FROM golang:1.25-alpine

RUN go install github.com/air-verse/air@latest

WORKDIR /app

COPY go.mod go.sum ./
RUN go mod download

# Generated proto files
COPY gen/ ./gen/

# Shared packages
COPY pkg/config/ ./pkg/config/
COPY pkg/logger/ ./pkg/logger/
COPY pkg/metrics/ ./pkg/metrics/
COPY pkg/ratelimit/ ./pkg/ratelimit/

# Services
COPY services/gateway-svc/ ./services/gateway-svc/

EXPOSE 8080

CMD ["air", "-c", "services/gateway-svc/.air.toml"]
